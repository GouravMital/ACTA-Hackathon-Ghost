<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgentBlocks - AI Workflow Builder</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- API Setup Modal -->
    <div id="api-setup-modal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>üîë API Key Setup</h2>
                <p>Configure your AI API keys to start building workflows</p>
            </div>
            <div class="modal-body">
                <div class="api-service">
                    <label class="form-label">
                        <span class="api-service-name">OpenAI API Key</span>
                        <span class="api-service-desc">For GPT models (content generation, research)</span>
                    </label>
                    <input type="password" id="openai-key" class="form-control" placeholder="sk-...">
                    <button type="button" class="btn btn--sm btn--outline test-key-btn" data-service="openai">Test Key</button>
                    <div class="api-status" id="openai-status"></div>
                </div>
                <div class="api-service">
                    <label class="form-label">
                        <span class="api-service-name">Google Gemini API Key</span>
                        <span class="api-service-desc">For data analysis and insights</span>
                    </label>
                    <input type="password" id="gemini-key" class="form-control" placeholder="AIza...">
                    <button type="button" class="btn btn--sm btn--outline test-key-btn" data-service="gemini">Test Key</button>
                    <div class="api-status" id="gemini-status"></div>
                </div>
                <div class="api-service">
                    <label class="form-label">
                        <span class="api-service-name">Anthropic Claude API Key</span>
                        <span class="api-service-desc">Alternative for content generation</span>
                    </label>
                    <input type="password" id="anthropic-key" class="form-control" placeholder="sk-ant-...">
                    <button type="button" class="btn btn--sm btn--outline test-key-btn" data-service="anthropic">Test Key</button>
                    <div class="api-status" id="anthropic-status"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn--outline" id="skip-setup">Skip for Now</button>
                <button type="button" class="btn btn--primary" id="save-keys">Save & Continue</button>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-left">
                <div class="app-logo">
                    <div class="logo-icon">üß©</div>
                    <span>AgentBlocks</span>
                </div>
                <div class="workspace-name">
                    <span>Untitled Workflow</span>
                    <button class="btn--ghost" id="rename-workflow">‚úèÔ∏è</button>
                </div>
            </div>
            <div class="header-center">
                <div class="workflow-controls">
                    <button class="btn btn--primary" id="run-workflow">
                        <span class="btn-icon">‚ñ∂Ô∏è</span>
                        Run Workflow
                    </button>
                    <button class="btn btn--outline" id="stop-workflow" disabled>
                        <span class="btn-icon">‚èπÔ∏è</span>
                        Stop
                    </button>
                </div>
            </div>
            <div class="header-right">
                <button class="btn btn--ghost" id="save-workflow" title="Save">üíæ</button>
                <button class="btn btn--ghost" id="export-workflow" title="Export">üì§</button>
                <button class="btn btn--ghost" id="import-workflow" title="Import">üì•</button>
                <button class="btn btn--ghost" id="settings-btn" title="Settings">‚öôÔ∏è</button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="app-main">
            <!-- Left Sidebar - Block Library -->
            <aside class="sidebar sidebar--left">
                <div class="sidebar-header">
                    <h3>Block Library</h3>
                    <div class="search-box">
                        <input type="text" placeholder="Search blocks..." id="block-search">
                    </div>
                </div>
                <div class="block-library" id="block-library">
                    <!-- Blocks will be dynamically generated -->
                </div>
            </aside>

            <!-- Canvas Area -->
            <div class="canvas-container">
                <div class="canvas-toolbar">
                    <div class="zoom-controls">
                        <button class="btn btn--sm btn--ghost" id="zoom-out">üîç-</button>
                        <span class="zoom-level">100%</span>
                        <button class="btn btn--sm btn--ghost" id="zoom-in">üîç+</button>
                    </div>
                    <button class="btn btn--sm btn--ghost" id="fit-to-screen">Fit to Screen</button>
                    <button class="btn btn--sm btn--ghost" id="clear-canvas">Clear All</button>
                </div>
                <div class="canvas-wrapper">
                    <div class="canvas" id="canvas">
                        <svg class="connections-layer" id="connections-svg"></svg>
                        <div class="blocks-layer" id="blocks-layer"></div>
                    </div>
                </div>
            </div>

            <!-- Right Sidebar - Configuration -->
            <aside class="sidebar sidebar--right">
                <div class="sidebar-header">
                    <h3>Block Configuration</h3>
                </div>
                <div class="config-panel" id="config-panel">
                    <div class="config-empty">
                        <div class="empty-icon">üìã</div>
                        <p>Select a block to configure its settings</p>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Status Bar -->
        <footer class="status-bar">
            <div class="status-left">
                <span class="status-item">
                    <span class="status-label">Blocks:</span>
                    <span id="block-count">0</span>
                </span>
                <span class="status-item">
                    <span class="status-label">Connections:</span>
                    <span id="connection-count">0</span>
                </span>
            </div>
            <div class="status-right">
                <div class="api-indicators">
                    <div class="api-indicator" data-service="openai" title="OpenAI">
                        <span class="indicator-dot"></span>
                        <span>OpenAI</span>
                    </div>
                    <div class="api-indicator" data-service="gemini" title="Google Gemini">
                        <span class="indicator-dot"></span>
                        <span>Gemini</span>
                    </div>
                    <div class="api-indicator" data-service="anthropic" title="Anthropic Claude">
                        <span class="indicator-dot"></span>
                        <span>Claude</span>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚öôÔ∏è Settings</h2>
                <button class="modal-close" id="close-settings">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h4>API Keys</h4>
                    <button class="btn btn--outline" id="manage-api-keys">Manage API Keys</button>
                </div>
                <div class="settings-section">
                    <h4>Workflow Settings</h4>
                    <label class="form-label">
                        Auto-save
                        <input type="checkbox" id="auto-save" checked>
                    </label>
                    <label class="form-label">
                        Show grid
                        <input type="checkbox" id="show-grid" checked>
                    </label>
                </div>
                <div class="settings-section">
                    <h4>Data & Privacy</h4>
                    <button class="btn btn--outline btn--warning" id="clear-all-data">Clear All Data</button>
                    <p class="settings-note">This will delete all workflows and API keys stored locally.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Progress Modal -->
    <div id="progress-modal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-content--small">
            <div class="modal-header">
                <h3>üîÑ Running Workflow</h3>
            </div>
            <div class="modal-body">
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <div class="progress-text" id="progress-text">Starting workflow...</div>
                </div>
                <div class="progress-steps" id="progress-steps">
                    <!-- Progress steps will be dynamically added -->
                </div>
            </div>
        </div>
    </div>

    <!-- Notifications Container -->
    <div class="notifications-container" id="notifications"></div>

    <!-- File Input (Hidden) -->
    <input type="file" id="file-input" accept=".json" style="display: none;">

    <script src="app.js"></script>
</body>
</html>